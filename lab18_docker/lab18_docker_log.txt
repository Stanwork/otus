Script started on 2023-07-02 17:33:29+03:00 [TERM="xterm-256color" TTY="/dev/pts/5" COLUMNS="211" LINES="53"]
]0;root@vmalma0:/home/stas/otus_labs/lab18_docker[?2004h[root@vmalma0 lab18_docker]# docker[2Pexit[2Pmcpowerofftop -o %MEM[Kexitvagrant sshansible nginx -i staging/hosts -m ping[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cll[Kcd otus/lab15_ansible/[12Pansible -V[6Pexit[2Pmcls -lshchown -R stas:stas otusls -lsh[Kchown stas:stas otuspwd[Kls -lshmkdir -p otusansible --version[4Pmkdir -p otus[6Pls -lsh[4Ppwdchown stas:stas otus[13Pls -lshchown -R stas:stas otusls -lsh[Kmc[Kexitansible -Vcd otus/lab15_ansible/ll[Kansible nginx -i staging/hosts -m ping[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cvagrant ssh[K[7Pexit[1Ptop -o %MEM[3Ppoweroffmc[Kexitdocker[2Pexitdocker bi[Kuild -t nginx-3ppp[K[K[K000 .
[?2004l[1A[1B[0G[?25l[+] Building 0.0s (0/2)                                                                                                                                                                                            
[?25h[1A[0G[?25l[+] Building 0.2s (0/2)                                                                                                                                                                                            
 => [internal] load build definition from Dockerfile                                                                                                                                                          0.2s
 => [internal] load .dockerignore                                                                                                                                                                             0.2s
[?25h[1A[1A[1A[0G[?25l[+] Building 0.3s (0/2)                                                                                                                                                                                            
 => [internal] load build definition from Dockerfile                                                                                                                                                          0.3s
 => [internal] load .dockerignore                                                                                                                                                                             0.3s
 => => transferring context:                                                                                                                                                                                  0.0s
[?25h[1A[1A[1A[1A[0G[?25l[+] Building 0.4s (0/2)                                                                                                                                                                                            
 => [internal] load build definition from Dockerfile                                                                                                                                                          0.4s
 => [internal] load .dockerignore                                                                                                                                                                             0.4s
[34m => => transferring context: 2B                                                                                                                                                                               0.0s
[0m[?25h[1A[1A[1A[1A[0G[?25l[+] Building 0.6s (1/2)                                                                                                                                                                                            
 => [internal] load build definition from Dockerfile                                                                                                                                                          0.6s
[34m => => transferring dockerfile: 280B                                                                                                                                                                          0.0s
[0m[34m => [internal] load .dockerignore                                                                                                                                                                             0.6s
[0m[34m => => transferring context: 2B                                                                                                                                                                               0.0s
[0m[?25h[1A[1A[1A[1A[1A[0G[?25l[+] Building 0.7s (1/2)                                                                                                                                                                                            
 => [internal] load build definition from Dockerfile                                                                                                                                                          0.7s
[34m => => transferring dockerfile: 280B                                                                                                                                                                          0.0s
[0m[34m => [internal] load .dockerignore                                                                                                                                                                             0.6s
[0m[34m => => transferring context: 2B                                                                                                                                                                               0.0s
[0m[?25h[1A[1A[1A[1A[1A[0G[?25l[+] Building 0.8s (2/3)                                                                                                                                                                                            
[34m => [internal] load build definition from Dockerfile                                                                                                                                                          0.8s
[0m[34m => => transferring dockerfile: 280B                                                                                                                                                                          0.0s
[0m[34m => [internal] load .dockerignore                                                                                                                                                                             0.6s
[0m[34m => => transferring context: 2B                                                                                                                                                                               0.0s
[0m => [internal] load metadata for docker.io/library/nginx:stable                                                                                                                                               0.0s
[?25h[1A[1A[1A[1A[1A[1A[0G[?25l[+] Building 1.0s (2/3)                                                                                                                                                                                            
[34m => [internal] load build definition from Dockerfile                                                                                                                                                          0.8s
[0m[34m => => transferring dockerfile: 280B                                                                                                                                                                          0.0s
[0m[34m => [internal] load .dockerignore                                                                                                                                                                             0.6s
[0m[34m => => transferring context: 2B                                                                                                                                                                               0.0s
[0m => [internal] load metadata for docker.io/library/nginx:stable                                                                                                                                               0.2s
[?25h[1A[1A[1A[1A[1A[1A[0G[?25l[+] Building 1.1s (2/3)                                                                                                                                                                                            
[34m => [internal] load build definition from Dockerfile                                                                                                                                                          0.8s
[0m[34m => => transferring dockerfile: 280B                                                                                                                                                                          0.0s
[0m[34m => [internal] load .dockerignore                                                                                                                                                                             0.6s
[0m[34m => => transferring context: 2B                                                                                                                                                                               0.0s
[0m => [internal] load metadata for docker.io/library/nginx:stable                                                                                                                                               0.3s
[?25h[1A[1A[1A[1A[1A[1A[0G[?25l[+] Building 1.3s (2/3)                                                                                                                                                                                            
[34m => [internal] load build definition from Dockerfile                                                                                                                                                          0.8s
[0m[34m => => transferring dockerfile: 280B                                                                                                                                                                          0.0s
[0m[34m => [internal] load .dockerignore                                                                                                                                                                             0.6s
[0m[34m => => transferring context: 2B                                                                                                                                                                               0.0s
[0m => [internal] load metadata for docker.io/library/nginx:stable                                                                                                                                               0.5s
[?25h[1A[1A[1A[1A[1A[1A[0G[?25l[+] Building 1.4s (2/3)                                                                                                                                                                                            
[34m => [internal] load build definition from Dockerfile                                                                                                                                                          0.8s
[0m[34m => => transferring dockerfile: 280B                                                                                                                                                                          0.0s
[0m[34m => [internal] load .dockerignore                                                                                                                                                                             0.6s
[0m[34m => => transferring context: 2B                                                                                                                                                                               0.0s
[0m => [internal] load metadata for docker.io/library/nginx:stable                                                                                                                                               0.6s
[?25h[1A[1A[1A[1A[1A[1A[0G[?25l[+] Building 1.6s (2/3)                                                                                                                                                                                            
[34m => [internal] load build definition from Dockerfile                                                                                                                                                          0.8s
[0m[34m => => transferring dockerfile: 280B                                                                                                                                                                          0.0s
[0m[34m => [internal] load .dockerignore                                                                                                                                                                             0.6s
[0m[34m => => transferring context: 2B                                                                                                                                                                               0.0s
[0m => [internal] load metadata for docker.io/library/nginx:stable                                                                                                                                               0.8s
[?25h[1A[1A[1A[1A[1A[1A[0G[?25l[+] Building 1.7s (2/3)                                                                                                                                                                                            
[34m => [internal] load build definition from Dockerfile                                                                                                                                                          0.8s
[0m[34m => => transferring dockerfile: 280B                                                                                                                                                                          0.0s
[0m[34m => [internal] load .dockerignore                                                                                                                                                                             0.6s
[0m[34m => => transferring context: 2B                                                                                                                                                                               0.0s
[0m => [internal] load metadata for docker.io/library/nginx:stable                                                                                                                                               0.9s
[?25h[1A[1A[1A[1A[1A[1A[0G[?25l[+] Building 1.9s (2/3)                                                                                                                                                                                            
[34m => [internal] load build definition from Dockerfile                                                                                                                                                          0.8s
[0m[34m => => transferring dockerfile: 280B                                                                                                                                                                          0.0s
[0m[34m => [internal] load .dockerignore                                                                                                                                                                             0.6s
[0m[34m => => transferring context: 2B                                                                                                                                                                               0.0s
[0m => [internal] load metadata for docker.io/library/nginx:stable                                                                                                                                               1.1s
[?25h[1A[1A[1A[1A[1A[1A[0G[?25l[+] Building 2.0s (2/3)                                                                                                                                                                                            
[34m => [internal] load build definition from Dockerfile                                                                                                                                                          0.8s
[0m[34m => => transferring dockerfile: 280B                                                                                                                                                                          0.0s
[0m[34m => [internal] load .dockerignore                                                                                                                                                                             0.6s
[0m[34m => => transferring context: 2B                                                                                                                                                                               0.0s
[0m => [internal] load metadata for docker.io/library/nginx:stable                                                                                                                                               1.2s
[?25h[1A[1A[1A[1A[1A[1A[0G[?25l[+] Building 2.2s (2/3)                                                                                                                                                                                            
[34m => [internal] load build definition from Dockerfile                                                                                                                                                          0.8s
[0m[34m => => transferring dockerfile: 280B                                                                                                                                                                          0.0s
[0m[34m => [internal] load .dockerignore                                                                                                                                                                             0.6s
[0m[34m => => transferring context: 2B                                                                                                                                                                               0.0s
[0m => [internal] load metadata for docker.io/library/nginx:stable                                                                                                                                               1.4s
[?25h[1A[1A[1A[1A[1A[1A[0G[?25l[+] Building 2.3s (2/3)                                                                                                                                                                                            
[34m => [internal] load build definition from Dockerfile                                                                                                                                                          0.8s
[0m[34m => => transferring dockerfile: 280B                                                                                                                                                                          0.0s
[0m[34m => [internal] load .dockerignore                                                                                                                                                                             0.6s
[0m[34m => => transferring context: 2B                                                                                                                                                                               0.0s
[0m => [internal] load metadata for docker.io/library/nginx:stable                                                                                                                                               1.5s
[?25h[1A[1A[1A[1A[1A[1A[0G[?25l[+] Building 2.5s (2/3)                                                                                                                                                                                            
[34m => [internal] load build definition from Dockerfile                                                                                                                                                          0.8s
[0m[34m => => transferring dockerfile: 280B                                                                                                                                                                          0.0s
[0m[34m => [internal] load .dockerignore                                                                                                                                                                             0.6s
[0m[34m => => transferring context: 2B                                                                                                                                                                               0.0s
[0m => [internal] load metadata for docker.io/library/nginx:stable                                                                                                                                               1.7s
[?25h[1A[1A[1A[1A[1A[1A[0G[?25l[+] Building 2.6s (2/3)                                                                                                                                                                                            
[34m => [internal] load build definition from Dockerfile                                                                                                                                                          0.8s
[0m[34m => => transferring dockerfile: 280B                                                                                                                                                                          0.0s
[0m[34m => [internal] load .dockerignore                                                                                                                                                                             0.6s
[0m[34m => => transferring context: 2B                                                                                                                                                                               0.0s
[0m => [internal] load metadata for docker.io/library/nginx:stable                                                                                                                                               1.8s
[?25h[1A[1A[1A[1A[1A[1A[0G[?25l[+] Building 2.8s (2/3)                                                                                                                                                                                            
[34m => [internal] load build definition from Dockerfile                                                                                                                                                          0.8s
[0m[34m => => transferring dockerfile: 280B                                                                                                                                                                          0.0s
[0m[34m => [internal] load .dockerignore                                                                                                                                                                             0.6s
[0m[34m => => transferring context: 2B                                                                                                                                                                               0.0s
[0m => [internal] load metadata for docker.io/library/nginx:stable                                                                                                                                               2.0s
[?25h[1A[1A[1A[1A[1A[1A[0G[?25l[+] Building 2.9s (2/3)                                                                                                                                                                                            
[34m => [internal] load build definition from Dockerfile                                                                                                                                                          0.8s
[0m[34m => => transferring dockerfile: 280B                                                                                                                                                                          0.0s
[0m[34m => [internal] load .dockerignore                                                                                                                                                                             0.6s
[0m[34m => => transferring context: 2B                                                                                                                                                                               0.0s
[0m => [internal] load metadata for docker.io/library/nginx:stable                                                                                                                                               2.1s
[?25h[1A[1A[1A[1A[1A[1A[0G[?25l[+] Building 3.1s (4/8)                                                                                                                                                                                            
[34m => [internal] load build definition from Dockerfile                                                                                                                                                          0.8s
[0m[34m => => transferring dockerfile: 280B                                                                                                                                                                          0.0s
[0m[34m => [internal] load .dockerignore                                                                                                                                                                             0.6s
[0m[34m => => transferring context: 2B                                                                                                                                                                               0.0s
[0m[34m => [internal] load metadata for docker.io/library/nginx:stable                                                                                                                                               2.2s
[0m[34m => [1/4] FROM docker.io/library/nginx:stable@sha256:a8281ce42034b078dc7d88a5bfe6d25d75956aad9abba75150798b90fa3d1010                                                                                         0.0s
[0m => [internal] load build context                                                                                                                                                                             0.1s
[?25h[1A[1A[1A[1A[1A[1A[1A[1A[0G[?25l[+] Building 3.2s (4/8)                                                                                                                                                                                            
[34m => [internal] load build definition from Dockerfile                                                                                                                                                          0.8s
[0m[34m => => transferring dockerfile: 280B                                                                                                                                                                          0.0s
[0m[34m => [internal] load .dockerignore                                                                                                                                                                             0.6s
[0m[34m => => transferring context: 2B                                                                                                                                                                               0.0s
[0m[34m => [internal] load metadata for docker.io/library/nginx:stable                                                                                                                                               2.2s
[0m[34m => [1/4] FROM docker.io/library/nginx:stable@sha256:a8281ce42034b078dc7d88a5bfe6d25d75956aad9abba75150798b90fa3d1010                                                                                         0.0s
[0m => [internal] load build context                                                                                                                                                                             0.2s
[?25h[1A[1A[1A[1A[1A[1A[1A[1A[0G[?25l[+] Building 3.4s (4/8)                                                                                                                                                                                            
[34m => [internal] load build definition from Dockerfile                                                                                                                                                          0.8s
[0m[34m => => transferring dockerfile: 280B                                                                                                                                                                          0.0s
[0m[34m => [internal] load .dockerignore                                                                                                                                                                             0.6s
[0m[34m => => transferring context: 2B                                                                                                                                                                               0.0s
[0m[34m => [internal] load metadata for docker.io/library/nginx:stable                                                                                                                                               2.2s
[0m[34m => [1/4] FROM docker.io/library/nginx:stable@sha256:a8281ce42034b078dc7d88a5bfe6d25d75956aad9abba75150798b90fa3d1010                                                                                         0.0s
[0m => [internal] load build context                                                                                                                                                                             0.4s
[34m => => transferring context: 2.13kB                                                                                                                                                                           0.0s
[0m[?25h[1A[1A[1A[1A[1A[1A[1A[1A[1A[0G[?25l[+] Building 3.5s (7/8)                                                                                                                                                                                            
[34m => [internal] load build definition from Dockerfile                                                                                                                                                          0.8s
[0m[34m => => transferring dockerfile: 280B                                                                                                                                                                          0.0s
[0m[34m => [internal] load .dockerignore                                                                                                                                                                             0.6s
[0m[34m => => transferring context: 2B                                                                                                                                                                               0.0s
[0m[34m => [internal] load metadata for docker.io/library/nginx:stable                                                                                                                                               2.2s
[0m[34m => [1/4] FROM docker.io/library/nginx:stable@sha256:a8281ce42034b078dc7d88a5bfe6d25d75956aad9abba75150798b90fa3d1010                                                                                         0.0s
[0m[34m => [internal] load build context                                                                                                                                                                             0.4s
[0m[34m => => transferring context: 2.13kB                                                                                                                                                                           0.0s
[0m[34m => CACHED [2/4] COPY nginx.conf /etc/nginx/                                                                                                                                                                  0.0s
[0m[34m => CACHED [3/4] COPY nginx_3000.conf /etc/nginx/conf.d/                                                                                                                                                      0.0s
[0m => [4/4] COPY ./html/ /usr/share/nginx/html/                                                                                                                                                                 0.1s
[?25h[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[0G[?25l[+] Building 3.7s (7/8)                                                                                                                                                                                            
[34m => [internal] load build definition from Dockerfile                                                                                                                                                          0.8s
[0m[34m => => transferring dockerfile: 280B                                                                                                                                                                          0.0s
[0m[34m => [internal] load .dockerignore                                                                                                                                                                             0.6s
[0m[34m => => transferring context: 2B                                                                                                                                                                               0.0s
[0m[34m => [internal] load metadata for docker.io/library/nginx:stable                                                                                                                                               2.2s
[0m[34m => [1/4] FROM docker.io/library/nginx:stable@sha256:a8281ce42034b078dc7d88a5bfe6d25d75956aad9abba75150798b90fa3d1010                                                                                         0.0s
[0m[34m => [internal] load build context                                                                                                                                                                             0.4s
[0m[34m => => transferring context: 2.13kB                                                                                                                                                                           0.0s
[0m[34m => CACHED [2/4] COPY nginx.conf /etc/nginx/                                                                                                                                                                  0.0s
[0m[34m => CACHED [3/4] COPY nginx_3000.conf /etc/nginx/conf.d/                                                                                                                                                      0.0s
[0m => [4/4] COPY ./html/ /usr/share/nginx/html/                                                                                                                                                                 0.3s
[?25h[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[0G[?25l[+] Building 3.8s (7/8)                                                                                                                                                                                            
[34m => [internal] load build definition from Dockerfile                                                                                                                                                          0.8s
[0m[34m => => transferring dockerfile: 280B                                                                                                                                                                          0.0s
[0m[34m => [internal] load .dockerignore                                                                                                                                                                             0.6s
[0m[34m => => transferring context: 2B                                                                                                                                                                               0.0s
[0m[34m => [internal] load metadata for docker.io/library/nginx:stable                                                                                                                                               2.2s
[0m[34m => [1/4] FROM docker.io/library/nginx:stable@sha256:a8281ce42034b078dc7d88a5bfe6d25d75956aad9abba75150798b90fa3d1010                                                                                         0.0s
[0m[34m => [internal] load build context                                                                                                                                                                             0.4s
[0m[34m => => transferring context: 2.13kB                                                                                                                                                                           0.0s
[0m[34m => CACHED [2/4] COPY nginx.conf /etc/nginx/                                                                                                                                                                  0.0s
[0m[34m => CACHED [3/4] COPY nginx_3000.conf /etc/nginx/conf.d/                                                                                                                                                      0.0s
[0m => [4/4] COPY ./html/ /usr/share/nginx/html/                                                                                                                                                                 0.4s
[?25h[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[0G[?25l[+] Building 3.9s (8/9)                                                                                                                                                                                            
[34m => [internal] load build definition from Dockerfile                                                                                                                                                          0.8s
[0m[34m => => transferring dockerfile: 280B                                                                                                                                                                          0.0s
[0m[34m => [internal] load .dockerignore                                                                                                                                                                             0.6s
[0m[34m => => transferring context: 2B                                                                                                                                                                               0.0s
[0m[34m => [internal] load metadata for docker.io/library/nginx:stable                                                                                                                                               2.2s
[0m[34m => [1/4] FROM docker.io/library/nginx:stable@sha256:a8281ce42034b078dc7d88a5bfe6d25d75956aad9abba75150798b90fa3d1010                                                                                         0.0s
[0m[34m => [internal] load build context                                                                                                                                                                             0.4s
[0m[34m => => transferring context: 2.13kB                                                                                                                                                                           0.0s
[0m[34m => CACHED [2/4] COPY nginx.conf /etc/nginx/                                                                                                                                                                  0.0s
[0m[34m => CACHED [3/4] COPY nginx_3000.conf /etc/nginx/conf.d/                                                                                                                                                      0.0s
[0m[34m => [4/4] COPY ./html/ /usr/share/nginx/html/                                                                                                                                                                 0.4s
[0m => exporting to image                                                                                                                                                                                        0.0s
 => => exporting layers                                                                                                                                                                                       0.0s
[?25h[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[0G[?25l[+] Building 4.1s (8/9)                                                                                                                                                                                            
[34m => [internal] load build definition from Dockerfile                                                                                                                                                          0.8s
[0m[34m => => transferring dockerfile: 280B                                                                                                                                                                          0.0s
[0m[34m => [internal] load .dockerignore                                                                                                                                                                             0.6s
[0m[34m => => transferring context: 2B                                                                                                                                                                               0.0s
[0m[34m => [internal] load metadata for docker.io/library/nginx:stable                                                                                                                                               2.2s
[0m[34m => [1/4] FROM docker.io/library/nginx:stable@sha256:a8281ce42034b078dc7d88a5bfe6d25d75956aad9abba75150798b90fa3d1010                                                                                         0.0s
[0m[34m => [internal] load build context                                                                                                                                                                             0.4s
[0m[34m => => transferring context: 2.13kB                                                                                                                                                                           0.0s
[0m[34m => CACHED [2/4] COPY nginx.conf /etc/nginx/                                                                                                                                                                  0.0s
[0m[34m => CACHED [3/4] COPY nginx_3000.conf /etc/nginx/conf.d/                                                                                                                                                      0.0s
[0m[34m => [4/4] COPY ./html/ /usr/share/nginx/html/                                                                                                                                                                 0.4s
[0m => exporting to image                                                                                                                                                                                        0.2s
 => => exporting layers                                                                                                                                                                                       0.2s
[?25h[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[0G[?25l[+] Building 4.2s (8/9)                                                                                                                                                                                            
[34m => [internal] load build definition from Dockerfile                                                                                                                                                          0.8s
[0m[34m => => transferring dockerfile: 280B                                                                                                                                                                          0.0s
[0m[34m => [internal] load .dockerignore                                                                                                                                                                             0.6s
[0m[34m => => transferring context: 2B                                                                                                                                                                               0.0s
[0m[34m => [internal] load metadata for docker.io/library/nginx:stable                                                                                                                                               2.2s
[0m[34m => [1/4] FROM docker.io/library/nginx:stable@sha256:a8281ce42034b078dc7d88a5bfe6d25d75956aad9abba75150798b90fa3d1010                                                                                         0.0s
[0m[34m => [internal] load build context                                                                                                                                                                             0.4s
[0m[34m => => transferring context: 2.13kB                                                                                                                                                                           0.0s
[0m[34m => CACHED [2/4] COPY nginx.conf /etc/nginx/                                                                                                                                                                  0.0s
[0m[34m => CACHED [3/4] COPY nginx_3000.conf /etc/nginx/conf.d/                                                                                                                                                      0.0s
[0m[34m => [4/4] COPY ./html/ /usr/share/nginx/html/                                                                                                                                                                 0.4s
[0m => exporting to image                                                                                                                                                                                        0.3s
 => => exporting layers                                                                                                                                                                                       0.3s
[?25h[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[0G[?25l[+] Building 4.4s (9/9)                                                                                                                                                                                            
[34m => [internal] load build definition from Dockerfile                                                                                                                                                          0.8s
[0m[34m => => transferring dockerfile: 280B                                                                                                                                                                          0.0s
[0m[34m => [internal] load .dockerignore                                                                                                                                                                             0.6s
[0m[34m => => transferring context: 2B                                                                                                                                                                               0.0s
[0m[34m => [internal] load metadata for docker.io/library/nginx:stable                                                                                                                                               2.2s
[0m[34m => [1/4] FROM docker.io/library/nginx:stable@sha256:a8281ce42034b078dc7d88a5bfe6d25d75956aad9abba75150798b90fa3d1010                                                                                         0.0s
[0m[34m => [internal] load build context                                                                                                                                                                             0.4s
[0m[34m => => transferring context: 2.13kB                                                                                                                                                                           0.0s
[0m[34m => CACHED [2/4] COPY nginx.conf /etc/nginx/                                                                                                                                                                  0.0s
[0m[34m => CACHED [3/4] COPY nginx_3000.conf /etc/nginx/conf.d/                                                                                                                                                      0.0s
[0m[34m => [4/4] COPY ./html/ /usr/share/nginx/html/                                                                                                                                                                 0.4s
[0m[34m => exporting to image                                                                                                                                                                                        0.4s
[0m[34m => => exporting layers                                                                                                                                                                                       0.3s
[0m[34m => => writing image sha256:fad9da25dad16493613eead3db79db47975dad136729876f8ac51b1d3d542fce                                                                                                                  0.0s
[0m[34m => => naming to docker.io/library/nginx-3000                                                                                                                                                                 0.0s
[0m[?25h[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[0G[?25l[+] Building 4.5s (9/9)                                                                                                                                                                                            
[34m => [internal] load build definition from Dockerfile                                                                                                                                                          0.8s
[0m[34m => => transferring dockerfile: 280B                                                                                                                                                                          0.0s
[0m[34m => [internal] load .dockerignore                                                                                                                                                                             0.6s
[0m[34m => => transferring context: 2B                                                                                                                                                                               0.0s
[0m[34m => [internal] load metadata for docker.io/library/nginx:stable                                                                                                                                               2.2s
[0m[34m => [1/4] FROM docker.io/library/nginx:stable@sha256:a8281ce42034b078dc7d88a5bfe6d25d75956aad9abba75150798b90fa3d1010                                                                                         0.0s
[0m[34m => [internal] load build context                                                                                                                                                                             0.4s
[0m[34m => => transferring context: 2.13kB                                                                                                                                                                           0.0s
[0m[34m => CACHED [2/4] COPY nginx.conf /etc/nginx/                                                                                                                                                                  0.0s
[0m[34m => CACHED [3/4] COPY nginx_3000.conf /etc/nginx/conf.d/                                                                                                                                                      0.0s
[0m[34m => [4/4] COPY ./html/ /usr/share/nginx/html/                                                                                                                                                                 0.4s
[0m[34m => exporting to image                                                                                                                                                                                        0.4s
[0m[34m => => exporting layers                                                                                                                                                                                       0.3s
[0m[34m => => writing image sha256:fad9da25dad16493613eead3db79db47975dad136729876f8ac51b1d3d542fce                                                                                                                  0.0s
[0m[34m => => naming to docker.io/library/nginx-3000                                                                                                                                                                 0.0s
[0m[?25h[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[0G[?25l[+] Building 4.7s (9/9)                                                                                                                                                                                            
[34m => [internal] load build definition from Dockerfile                                                                                                                                                          0.8s
[0m[34m => => transferring dockerfile: 280B                                                                                                                                                                          0.0s
[0m[34m => [internal] load .dockerignore                                                                                                                                                                             0.6s
[0m[34m => => transferring context: 2B                                                                                                                                                                               0.0s
[0m[34m => [internal] load metadata for docker.io/library/nginx:stable                                                                                                                                               2.2s
[0m[34m => [1/4] FROM docker.io/library/nginx:stable@sha256:a8281ce42034b078dc7d88a5bfe6d25d75956aad9abba75150798b90fa3d1010                                                                                         0.0s
[0m[34m => [internal] load build context                                                                                                                                                                             0.4s
[0m[34m => => transferring context: 2.13kB                                                                                                                                                                           0.0s
[0m[34m => CACHED [2/4] COPY nginx.conf /etc/nginx/                                                                                                                                                                  0.0s
[0m[34m => CACHED [3/4] COPY nginx_3000.conf /etc/nginx/conf.d/                                                                                                                                                      0.0s
[0m[34m => [4/4] COPY ./html/ /usr/share/nginx/html/                                                                                                                                                                 0.4s
[0m[34m => exporting to image                                                                                                                                                                                        0.4s
[0m[34m => => exporting layers                                                                                                                                                                                       0.3s
[0m[34m => => writing image sha256:fad9da25dad16493613eead3db79db47975dad136729876f8ac51b1d3d542fce                                                                                                                  0.0s
[0m[34m => => naming to docker.io/library/nginx-3000                                                                                                                                                                 0.0s
[0m[?25h[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[0G[?25l[+] Building 4.8s (9/9)                                                                                                                                                                                            
[34m => [internal] load build definition from Dockerfile                                                                                                                                                          0.8s
[0m[34m => => transferring dockerfile: 280B                                                                                                                                                                          0.0s
[0m[34m => [internal] load .dockerignore                                                                                                                                                                             0.6s
[0m[34m => => transferring context: 2B                                                                                                                                                                               0.0s
[0m[34m => [internal] load metadata for docker.io/library/nginx:stable                                                                                                                                               2.2s
[0m[34m => [1/4] FROM docker.io/library/nginx:stable@sha256:a8281ce42034b078dc7d88a5bfe6d25d75956aad9abba75150798b90fa3d1010                                                                                         0.0s
[0m[34m => [internal] load build context                                                                                                                                                                             0.4s
[0m[34m => => transferring context: 2.13kB                                                                                                                                                                           0.0s
[0m[34m => CACHED [2/4] COPY nginx.conf /etc/nginx/                                                                                                                                                                  0.0s
[0m[34m => CACHED [3/4] COPY nginx_3000.conf /etc/nginx/conf.d/                                                                                                                                                      0.0s
[0m[34m => [4/4] COPY ./html/ /usr/share/nginx/html/                                                                                                                                                                 0.4s
[0m[34m => exporting to image                                                                                                                                                                                        0.4s
[0m[34m => => exporting layers                                                                                                                                                                                       0.3s
[0m[34m => => writing image sha256:fad9da25dad16493613eead3db79db47975dad136729876f8ac51b1d3d542fce                                                                                                                  0.0s
[0m[34m => => naming to docker.io/library/nginx-3000                                                                                                                                                                 0.0s
[0m[?25h[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[0G[?25l[+] Building 5.0s (9/9)                                                                                                                                                                                            
[34m => [internal] load build definition from Dockerfile                                                                                                                                                          0.8s
[0m[34m => => transferring dockerfile: 280B                                                                                                                                                                          0.0s
[0m[34m => [internal] load .dockerignore                                                                                                                                                                             0.6s
[0m[34m => => transferring context: 2B                                                                                                                                                                               0.0s
[0m[34m => [internal] load metadata for docker.io/library/nginx:stable                                                                                                                                               2.2s
[0m[34m => [1/4] FROM docker.io/library/nginx:stable@sha256:a8281ce42034b078dc7d88a5bfe6d25d75956aad9abba75150798b90fa3d1010                                                                                         0.0s
[0m[34m => [internal] load build context                                                                                                                                                                             0.4s
[0m[34m => => transferring context: 2.13kB                                                                                                                                                                           0.0s
[0m[34m => CACHED [2/4] COPY nginx.conf /etc/nginx/                                                                                                                                                                  0.0s
[0m[34m => CACHED [3/4] COPY nginx_3000.conf /etc/nginx/conf.d/                                                                                                                                                      0.0s
[0m[34m => [4/4] COPY ./html/ /usr/share/nginx/html/                                                                                                                                                                 0.4s
[0m[34m => exporting to image                                                                                                                                                                                        0.4s
[0m[34m => => exporting layers                                                                                                                                                                                       0.3s
[0m[34m => => writing image sha256:fad9da25dad16493613eead3db79db47975dad136729876f8ac51b1d3d542fce                                                                                                                  0.0s
[0m[34m => => naming to docker.io/library/nginx-3000                                                                                                                                                                 0.0s
[0m[?25h[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[1A[0G[?25l[+] Building 5.0s (9/9) FINISHED                                                                                                                                                                                   
[34m => [internal] load build definition from Dockerfile                                                                                                                                                          0.8s
[0m[34m => => transferring dockerfile: 280B                                                                                                                                                                          0.0s
[0m[34m => [internal] load .dockerignore                                                                                                                                                                             0.6s
[0m[34m => => transferring context: 2B                                                                                                                                                                               0.0s
[0m[34m => [internal] load metadata for docker.io/library/nginx:stable                                                                                                                                               2.2s
[0m[34m => [1/4] FROM docker.io/library/nginx:stable@sha256:a8281ce42034b078dc7d88a5bfe6d25d75956aad9abba75150798b90fa3d1010                                                                                         0.0s
[0m[34m => [internal] load build context                                                                                                                                                                             0.4s
[0m[34m => => transferring context: 2.13kB                                                                                                                                                                           0.0s
[0m[34m => CACHED [2/4] COPY nginx.conf /etc/nginx/                                                                                                                                                                  0.0s
[0m[34m => CACHED [3/4] COPY nginx_3000.conf /etc/nginx/conf.d/                                                                                                                                                      0.0s
[0m[34m => [4/4] COPY ./html/ /usr/share/nginx/html/                                                                                                                                                                 0.4s
[0m[34m => exporting to image                                                                                                                                                                                        0.4s
[0m[34m => => exporting layers                                                                                                                                                                                       0.3s
[0m[34m => => writing image sha256:fad9da25dad16493613eead3db79db47975dad136729876f8ac51b1d3d542fce                                                                                                                  0.0s
[0m[34m => => naming to docker.io/library/nginx-3000                                                                                                                                                                 0.0s
[0m[?25h]0;root@vmalma0:/home/stas/otus_labs/lab18_docker[?2004h[root@vmalma0 lab18_docker]# docker images
[?2004lREPOSITORY   TAG       IMAGE ID       CREATED         SIZE
nginx-3000   latest    fad9da25dad1   8 seconds ago   142MB
]0;root@vmalma0:/home/stas/otus_labs/lab18_docker[?2004h[root@vmalma0 lab18_docker]# docker imagesbuild -t nginx-3000 .exit[K[2Pmcpowerofftop -o %MEM[Kexitvagrant sshansible nginx -i staging/hosts -m ping[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cll[Kcd otus/lab15_ansible/[12Pansible -V[6Pexit[2Pmcls -lshchown -R stas:stas otusls -lsh[Kchown -R stas:stas otusls -lsh[Kmc[Kexitansible -V[K[K[K[K[K[K[K[K[K[Kdocker run --rm --name mynginx -p 80:80 -p 3000:3000 -v nginx_htp[Kml:/ux[Ksr/share/ngins[Kx/html -v nginx_logs:/v[Klog/nginx -d nginx-3000
[?2004l5c5af0a49176b9da1675c6210e49a7c3edb4ac8356a3290a930d60bd40750fdb
]0;root@vmalma0:/home/stas/otus_labs/lab18_docker[?2004h[root@vmalma0 lab18_docker]# docker ps
[?2004lCONTAINER ID   IMAGE        COMMAND                  CREATED         STATUS         PORTS                                                                          NAMES
5c5af0a49176   nginx-3000   "/docker-entrypoint.…"   5 seconds ago   Up 4 seconds   0.0.0.0:80->80/tcp, :::80->80/tcp, 0.0.0.0:3000->3000/tcp, :::3000->3000/tcp   mynginx
]0;root@vmalma0:/home/stas/otus_labs/lab18_docker[?2004h[root@vmalma0 lab18_docker]# docker psrun --rm --name mynginx -p 80:80 -p 3000:3000 -v nginx_html:/usr/share/nginx/html -v nginx_logs:/log/nginx -d nginx-3000[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[Cps[K[Kcurl localhost
[?2004l<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>lab18_docker_nginx:80</title>
</head>
<body>
  <p>lab18_docker by stanwork43@gmail.com</p>
  <h1>Nginx on :80</h1>	  
</body>
</html>
		
]0;root@vmalma0:/home/stas/otus_labs/lab18_docker[?2004h[root@vmalma0 lab18_docker]# curl localhost:3000
[?2004l<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>lab18_docker_nginx:3000</title>
</head>
<body>
  <p>lab18_docker by stanwork43@gmail.com</p>
  <h1>Nginx on :3000</h1>      
</body>
</html>
          
]0;root@vmalma0:/home/stas/otus_labs/lab18_docker[?2004h[root@vmalma0 lab18_docker]# docker volume ls
[?2004lDRIVER    VOLUME NAME
local     nginx_html
local     nginx_logs
]0;root@vmalma0:/home/stas/otus_labs/lab18_docker[?2004h[root@vmalma0 lab18_docker]# docker volume ls[K[Kinst[Kpect nginx_html 
[?2004l[
    {
        "CreatedAt": "2023-07-02T17:36:50+03:00",
        "Driver": "local",
        "Labels": null,
        "Mountpoint": "/var/lib/docker/volumes/nginx_html/_data",
        "Name": "nginx_html",
        "Options": null,
        "Scope": "local"
    }
]
]0;root@vmalma0:/home/stas/otus_labs/lab18_docker[?2004h[root@vmalma0 lab18_docker]# tail [K[K[K[K[Kdocker volume inspect nginx_html [K[K[K[K[Klogs 
[?2004l[
    {
        "CreatedAt": "2023-07-02T17:36:50+03:00",
        "Driver": "local",
        "Labels": null,
        "Mountpoint": "/var/lib/docker/volumes/nginx_logs/_data",
        "Name": "nginx_logs",
        "Options": null,
        "Scope": "local"
    }
]
]0;root@vmalma0:/home/stas/otus_labs/lab18_docker[?2004h[root@vmalma0 lab18_docker]# tail /var/lib/docker/volumes/nginx_logs/d[K_data/access.log 
[?2004l172.17.0.1 - - [02/Jul/2023:14:40:53 +0000] "GET / HTTP/1.1" 200 211 "-" "curl/7.76.1" "-"
172.17.0.1 - - [02/Jul/2023:14:40:59 +0000] "GET / HTTP/1.1" 200 226 "-" "curl/7.76.1" "-"
]0;root@vmalma0:/home/stas/otus_labs/lab18_docker[?2004h[root@vmalma0 lab18_docker]# tail /var/lib/docker/volumes/nginx_logs/_data/access.log [K[K[K[K[K[K[K[K[K[K[Ke[K[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[C[13Pdocker volume inspect nginx_logs html[Cls[Kcurl localhost:3000[K:3000[K/failcha[Keck
[?2004l<html>
<head><title>404 Not Found</title></head>
<body>
<center><h1>404 Not Found</h1></center>
<hr><center>nginx/1.24.0</center>
</body>
</html>
]0;root@vmalma0:/home/stas/otus_labs/lab18_docker[?2004h[root@vmalma0 lab18_docker]# curl localhost/failchecktail /var/lib/docker/volumes/nginx_logs/_data/error.log 
[?2004l2023/07/02 14:36:51 [notice] 1#1: using the "epoll" event method
2023/07/02 14:36:51 [notice] 1#1: nginx/1.24.0
2023/07/02 14:36:51 [notice] 1#1: built by gcc 10.2.1 20210110 (Debian 10.2.1-6) 
2023/07/02 14:36:51 [notice] 1#1: OS: Linux 5.14.0-284.11.1.el9_2.x86_64
2023/07/02 14:36:51 [notice] 1#1: getrlimit(RLIMIT_NOFILE): 1073741816:1073741816
2023/07/02 14:36:51 [notice] 1#1: start worker processes
2023/07/02 14:36:51 [notice] 1#1: start worker process 29
2023/07/02 14:36:51 [notice] 1#1: start worker process 30
2023/07/02 14:44:04 [error] 30#30: *3 open() "/usr/share/nginx/html/failcheck" failed (2: No such file or directory), client: 172.17.0.1, server: localhost, request: "GET /failcheck HTTP/1.1", host: "localhost"
]0;root@vmalma0:/home/stas/otus_labs/lab18_docker[?2004h[root@vmalma0 lab18_docker]# exit
[?2004lexit

Script done on 2023-07-02 17:44:17+03:00 [COMMAND_EXIT_CODE="0"]
